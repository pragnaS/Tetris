//Pieces.c file
//This file describes the shapes and all possible rotations of the tetris pieces

#include "../inc/tm4c123gh6pm.h"
#include <stdint.h>
#include "Pieces.h"

//...................................................IMAGES.......................................................................//
const unsigned short red[] = {
 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD,
 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD,
 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD,
 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD,
 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD,
 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD, 0x20FD,
 0x20FD, 0x20FD, 0x20FD, 0x20FD

};

const unsigned short yellow[] = {
 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F,
 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F,
 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F,
 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F,
 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F,
 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F, 0x079F,
 0x079F, 0x079F, 0x079F, 0x079F,

};

const unsigned short green[] = {
 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84,
 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84,
 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84,
 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84,
 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84,
 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84, 0x4D84,
 0x4D84, 0x4D84, 0x4D84, 0x4D84,

};

const unsigned short blue[] = {
 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47,
 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47,
 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47,
 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47,
 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47,
 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47, 0xCA47,
 0xCA47, 0xCA47, 0xCA47, 0xCA47,

};

const unsigned short orange[] = {
 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF,
 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF,
 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF,
 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF,
 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF,
 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF, 0x23FF,
 0x23FF, 0x23FF, 0x23FF, 0x23FF,

};

const unsigned short black[] = {
 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
 0x0000, 0x0000, 0x0000, 0x0000,

};
//.....................................................IMAGES.....................................................................//

//Definition of tetris pieces

char pieces[5][4][3][3]= //5 pieces, 4 rotations, 3 by 3 shape
{
	//Square
	{
		{
		{0,0,0},
		{0,2,1},
		{0,1,1}
		},
		{
		{0,0,0},
		{0,2,1},
		{0,1,1}
		},
		{
		{0,0,0},
		{0,2,1},
		{0,1,1}
		},
		{
		{0,0,0},
		{0,2,1},
		{0,1,1}
		}
	},
	//L-piece
	{
		{
			{0,0,0},
			{0,1,0},
			{0,2,1}
		},
		{
			{0,0,0},
			{0,1,0},
			{1,2,0}
		},
		{
			{0,0,0},
			{0,1,1},
			{0,2,0}
		},
		{
			{0,0,0},
			{1,1,0},
			{0,2,0}
		}
	},
	//Z-piece
	{
		{
			{0,0,0},
			{0,2,1},
			{1,1,0}
		},
		{
			{0,0,0},
			{1,2,0},
			{0,1,1}
		},
		{
			{1,0,0},
			{1,2,0},
			{0,1,0}
		},
		{
			{0,0,1},
			{0,2,1},
			{0,1,0}
		}
	},
	//T-piece
	{
		{
			{0,0,0},
			{0,2,0},
			{1,1,1}
		},
		{
			{1,1,1},
			{0,2,0},
			{0,0,0}
		},
		{
			{0,0,1},
			{0,2,1},
			{0,0,1}
		},
		{
			{1,0,0},
			{1,2,0},
			{1,0,0}
		}
	},
	//I-piece
	{
		{
			{0,1,0},
			{0,2,0},
			{0,1,0}
		},
		{
			{0,0,0},
			{1,2,1},
			{0,0,0}
		},
		{
			{0,1,0},
			{0,2,0},
			{0,1,0}
		},
		{
			{0,0,0},
			{1,2,1},
			{0,0,0}
		}
	}
};


//This function returns the type of block in the piece
//Output: 0 if no block, 1 if it is a block, 2 if it is a pivot block
//Input: pieceType, rotation, x, y

int getBlockType(int pieceType, int rotation, int x, int y)
{
	return pieces[pieceType][rotation][x][y];
}

void DrawPiece(int type, int orientation, int x, int y)
{
	int pieceI=0, pieceJ=0;
	
	for(int i=x; i<x+3; i++)
	{
		for(int j=y; j<y+3; j++)
		{
			if(pieces[type][orientation][pieceI][pieceJ]!=0)
			{
				if(type==0)
					ST7735_DrawBitmap(10*i, 10*j, red, 10,10);
				if(type==1)
					ST7735_DrawBitmap(10*i, 10*j, blue, 10,10);
				if(type==2)
					ST7735_DrawBitmap(10*i, 10*j, green, 10,10);
				if(type==3)
					ST7735_DrawBitmap(10*i, 10*j, yellow, 10,10);
				if(type==4)
					ST7735_DrawBitmap(10*i, 10*j, orange, 10,10);
			}
			pieceJ++;
		}
		pieceI++;
	}
}

	void ClearPiece(int type, int orientation, int x, int y)
	{
		int pieceI=0, pieceJ=0;
		for(int i=x; i<x+3; i++)
		{
			for(int j=y; j<y+3; j++)
			{
				if(pieces[type][orientation][pieceI][pieceJ]!=0)
				{
						ST7735_DrawBitmap(10*i, 10*j, black, 10,10);
				}
			pieceJ++;
			}
		pieceI++;
		}
		
		
	}




		